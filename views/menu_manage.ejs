<%- include('./adminheader.ejs') %>

<div class="main-content">
  <section class="section">
    <div class="section-body">

      <h4 class="font-weight-bold py-3 mb-0">Product Manager</h4>
      <div class="text-muted small mt-0 mb-4 d-block breadcrumb"></div>

      <!-- Insert Product -->
      <div class="card mb-4" id="insertdiv">
        <h6 class="card-header">
          Product Manager
          <span style="float: right;">
            <button type="button" class="btn btn-primary show" id="show">Show</button>
          </span>
        </h6>
        <div class="card-body">
          <div class="form-row">
            <div class="form-group col-md-12">
              <label class="form-label">Product Name</label>
              <select class="form-control" id="productid" name="id" required></select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-6">
              <label class="form-label">Quantity</label>
              <input type="text" class="form-control" name="quantity" id="quantity" placeholder="Quantity">
            </div>

            <div class="form-group col-md-6">
              <label class="form-label">Price</label>
              <input type="number" class="form-control" name="price" placeholder="Price" id="price" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-12">
              <label class="form-label">Discount (In %)</label>
              <input type="text" class="form-control" name="discount" id="discount" placeholder="Discount (In %)">
            </div>
          </div>

          <button type="button" id="submit" class="btn btn-primary">Submit</button>
        </div>
      </div>

      <!-- Result -->
      <div class="card mb-4" id="result"></div>

      <!-- Edit Product -->
      <div class="card mb-4" id="editdiv">
        <h6 class="card-header">
          <button type="button" class="btn btn-primary show" id="back1" style="margin:10px">Back</button>
          Edit Data
        </h6>
        <div class="card-body">
          <form>
            <div class="form-row">
              <div class="form-group col-md-12">
                <label class="form-label">ID</label>
                <input type="text" class="form-control" id="pid" readonly>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-12">
                <label class="form-label">Product Name</label>
                <select class="form-control" id="pproductid" name="productid" required></select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-6">
                <label class="form-label">Quantity</label>
                <input type="text" class="form-control" name="quantity" id="pquantity" placeholder="Quantity">
              </div>

              <div class="form-group col-md-6">
                <label class="form-label">Price</label>
                <input type="number" class="form-control" name="price" id="pprice" placeholder="Price" required>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-6">
                <label class="form-label">Discount (In %)</label>
                <input type="text" class="form-control" name="discount" id="pdiscount" placeholder="Discount (In %)">
              </div>
            </div>

            <button type="button" id="update" class="btn btn-primary">Submit</button>
          </form>
        </div>
      </div>

      <!-- Update Image -->
      <div class="card mb-4" id="updateimagediv">
        <h6 class="card-header">
          <button type="button" class="btn btn-primary show" id="back2" style="margin:10px">Back</button>
          Upload Image
        </h6>
        <div class="card-body">
          <form action="/admin/pannel/subcategory/update_image" method="POST" enctype="multipart/form-data">
            <div class="form-row">
              <div class="form-group col-md-6">
                <label class="form-label">ID</label>
                <input type="text" class="form-control" id="peid" name="id" readonly>
              </div>

              <div class="form-group col-md-6">
                <label class="form-label">Image</label>
                <input type="file" class="form-control" name="image">
              </div>
            </div>

            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
      </div>

    </div>
  </section>
</div>

<!-- Scripts -->
<script src="/light/assets/js/app.min.js"></script>
<script src="/light/assets/js/scripts.js"></script>
<script src="/light/assets/js/custom.js"></script>
<script src="/javascripts/menu_manage.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>

<script>
  // Ajax form submission
  $('.uploadImage').submit(function (e) {
    e.preventDefault();
    let description = $("#editor").html().trim();
    $(this).ajaxSubmit({
      data: { description: description },
      contentType: 'application/json',
      success: function (response) {
        if (response.status == 300) {
          alert(response.description);
        } else {
          alert('Successfully');
          window.location.reload();
        }
      }
    });
    return false;
  });
</script>
