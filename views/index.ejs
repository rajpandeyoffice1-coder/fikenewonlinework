<%- include ('./navbar.ejs') %>
  <!-- Page content -->
  <main class="content-wrapper">
    <!-- Swiper CSS -->
    <meta charset="utf-8">

    <!-- Viewport -->
    <meta name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover">

    <!-- SEO Meta Tags -->
    <title>FIKA | Account - Sign Up</title>
    <meta name="description" content="FIKA | Account - Sign Up">
    <meta name="author" content="Createx Studio">

    <!-- Webmanifest + Favicon / App icons -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="/images/logo.png" sizes="32x32">
    <link rel="apple-touch-icon" href="/images/logo.png">

    <!-- Theme switcher (color modes) -->
    <script src="/theme/assets/js/theme-switcher.js"></script>

    <!-- Preloaded local web font (Inter) -->
    <link rel="preload" href="/theme/assets/fonts/inter-variable-latin.woff2" as="font" type="font/woff2"
      crossorigin="">

    <!-- Font icons -->
    <link rel="preload" href="/theme/assets/icons/cartzilla-icons.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="stylesheet" href="/theme/assets/icons/cartzilla-icons.min.css">

    <!-- Bootstrap + Theme styles -->
    <link rel="preload" href="/theme/assets/css/theme.min.css" as="style">
    <link rel="preload" href="/theme/assets/css/theme.rtl.min.css" as="style">
    <link rel="stylesheet" href="/theme/assets/css/theme.min.css" id="theme-styles">

    <!-- Customizer -->
    <script src="/theme/assets/js/customizer.min.js"></script>
    </head>

    <style>
      .swiper-slide img {
        width: 100%;
        height: auto;
        object-fit: cover;
      }

      .swiper {
        position: relative;
        z-index: 1;
      }

      .search-suggestion-panel {
        display: block !important;
      }


      .swiper-wrapper {
        display: flex;
      }

      /* üî• FIX: Allow navbar dropdowns to overflow */
      .content-wrapper {
        overflow: visible !important;
      }

      /* üî• Ensure search dropdown stays above banners */
      .search-suggestion-panel {
        z-index: 99999 !important;
      }



      /* Hide mobile banner by default */
      .mobile-banner {
        display: none;
      }

      /* Show mobile banner, hide desktop banner on small devices */
      @media (max-width: 767px) {
        .mobile-banner {
          display: block;
        }

        .desktop-banner {
          display: none;
        }
      }

      /* Product styling */
      .productname {
        color: black;
      }

      .productprice {
        color: black;
      }

      /* Blue Add to Cart button */
      .blue-cart-btn {
        background-color: #0d6efd !important;
        border: none !important;
        border-radius: 8px;
        padding: 8px 16px;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
      }

      .blue-cart-btn:hover {
        background-color: #0b5ed7 !important;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(13, 110, 253, 0.3);
      }

      .blue-cart-btn i {
        font-size: 16px;
      }

      /* Fix for dark theme sections */
      [data-bs-theme="dark"] {
        background-color: #1a1a1a !important;
      }

      [data-bs-theme="dark"] .text-body {
        color: rgba(255, 255, 255, 0.75) !important;
      }
    </style>

    <!-- Banner Section with Safety Checks -->
    <section class="container-fluid px-0">
      <div class="row">
        <div class="col-12">
          <% if (result && result[1] && Array.isArray(result[1])) { %>
            <!-- Desktop Banner Swiper -->
            <div class="swiper desktop-banner" data-swiper='{
            "spaceBetween": 10,
            "loop": true,
            "speed": 400,
            "autoplay": {
              "delay": 5500,
              "disableOnInteraction": false
            },
            "pagination": {
              "el": ".swiper-pagination",
              "clickable": true
            }
          }'>
              <div class="swiper-wrapper">
                <% for(let i=0; i < result[1].length; i++) { if(result[1][i] && result[1][i].type==='Desktop Banner' ) {
                  %>
                  <div class="swiper-slide text-center">
                    <a href="<%= result[1][i].link || '#' %>">
                      <img src="https://www.fikaonline.in/images/<%= result[1][i].image || '' %>" class="d-block w-100"
                        alt="Desktop Banner">
                    </a>
                  </div>
                  <% }} %>
              </div>
              <div class="swiper-pagination"></div>
            </div>

            <!-- Mobile Banner Swiper -->
            <div class="swiper mobile-banner" data-swiper='{
            "spaceBetween": 10,
            "loop": true,
            "speed": 400,
            "autoplay": {
              "delay": 5500,
              "disableOnInteraction": false
            },
            "pagination": {
              "el": ".swiper-pagination",
              "clickable": true
            }
          }'>
              <div class="swiper-wrapper">
                <% for(let i=0; i < result[1].length; i++) { if(result[1][i] && result[1][i].type==='Mobile Banner' ) {
                  %>
                  <div class="swiper-slide text-center">
                    <a href="<%= result[1][i].link || '#' %>">
                      <img src="https://www.fikaonline.in/images/<%= result[1][i].image || '' %>" class="d-block w-100"
                        alt="Mobile Banner">
                    </a>
                  </div>
                  <% }} %>
              </div>
              <div class="swiper-pagination"></div>
            </div>
            <% } else { %>
              <div class="text-center py-5">
                <h4>Welcome to FIKA</h4>
                <p class="text-muted">Premium Audio Solutions</p>
              </div>
              <% } %>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section class="container-fluid px-0">
      <div class="row" style="
    background:#f6f7f8;
    border-radius:12px;
    padding:20px 10px;
    text-align:center;
  ">

        <div class="col-6 col-md-3">
          <div style="display:flex;flex-direction:column;align-items:center;gap:10px;">
            <div style="
          width:56px;
          height:56px;
          border-radius:50%;
          background:#ffffff;
          display:flex;
          align-items:center;
          justify-content:center;
        ">
              <i class="ci-delivery" style="font-size:26px;"></i>
            </div>
            <h3 style="font-size:14px;font-weight:600;margin:0;">
              Free Shipping &amp; Returns
            </h3>
          </div>
        </div>

        <div class="col-6 col-md-3">
          <div style="display:flex;flex-direction:column;align-items:center;gap:10px;">
            <div style="
          width:56px;
          height:56px;
          border-radius:50%;
          background:#ffffff;
          display:flex;
          align-items:center;
          justify-content:center;
        ">
              <i class="ci-credit-card" style="font-size:26px;"></i>
            </div>
            <h3 style="font-size:14px;font-weight:600;margin:0;">
              Secure Payment
            </h3>
          </div>
        </div>

        <div class="col-6 col-md-3">
          <div style="display:flex;flex-direction:column;align-items:center;gap:10px;">
            <div style="
          width:56px;
          height:56px;
          border-radius:50%;
          background:#ffffff;
          display:flex;
          align-items:center;
          justify-content:center;
        ">
              <i class="ci-refresh-cw" style="font-size:26px;"></i>
            </div>
            <h3 style="font-size:14px;font-weight:600;margin:0;">
              1 Year Warranty
            </h3>
          </div>
        </div>

        <div class="col-6 col-md-3">
          <div style="display:flex;flex-direction:column;align-items:center;gap:10px;">
            <div style="
          width:56px;
          height:56px;
          border-radius:50%;
          background:#ffffff;
          display:flex;
          align-items:center;
          justify-content:center;
        ">
              <i class="ci-chat" style="font-size:26px;"></i>
            </div>
            <h3 style="font-size:14px;font-weight:600;margin:0;">
              24/7 Customer Support
            </h3>
            <!-- <p style="font-size:12px;color:#6c757d;margin:0;">
              Friendly 24/7 Support
            </p> -->
          </div>
        </div>

      </div>
    </section>


    <!-- New arrivals with Safety Checks -->
    <section class="container-fluid px-4 px-md-5" style="margin-top:80px;">

      <!-- HEADER -->
      <div style="
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:16px;
  ">
        <h2 style="font-weight:700;margin:0;">New Arrivals</h2>

        <a href="/products" style="
         font-size:14px;
         font-weight:600;
         color:#0d6efd;
         text-decoration:none;
       ">
          View More ‚Üí
        </a>
      </div>

      <% if (result && result[3] && result[3].length> 0) { %>

        <!-- GRID ROW -->
        <div class="row g-3">

          <% result[3].slice(0, 6).forEach(product=> { %>

            <!-- COL-2 -->
            <div class="col-6 col-sm-4 col-md-3 col-lg-2">

              <!-- CARD -->
              <div style="
        width:100%;
        background:#ffffff;
        border-radius:16px;
        border:2px dashed #d0d0d0;
        overflow:hidden;
        height:100%;
      ">

                <!-- IMAGE -->
                <img src="https://www.fikaonline.in/images/<%= product.image %>" alt="<%= product.name %>" style="
               width:100%;
               height:160px;
               object-fit:contain;
               padding:12px;
               background:#f8f8f8;
             ">

                <!-- YELLOW BAR -->
                <div style="
          background:#ffc107;
          font-size:12px;
          font-weight:600;
          text-align:center;
          padding:5px 0;
        ">
                  <%= product.spec || 'High Playback' %>
                </div>

                <!-- CONTENT -->
                <div style="padding:10px 12px;">

                  <!-- NAME -->
                  <a href="/product?id=<%= product.id %>" style="
               text-decoration:none;
               color:#000;
               display:block;
               font-size:14px;
               font-weight:600;
               white-space:nowrap;
               overflow:hidden;
               text-overflow:ellipsis;
               margin-bottom:6px;
             ">
                    <%= (result[3][i].name || 'Product').replace(/["‚Äú‚Äù]/g, '') %>
                  </a>

                  <!-- RATING -->
                  <div style="
            display:inline-flex;
            align-items:center;
            gap:4px;
            font-size:12px;
            border:1px solid #ddd;
            border-radius:12px;
            padding:2px 6px;
            margin-bottom:6px;
          ">
                    ‚≠ê <%= product.rating || '4.8' %>
                  </div>

                  <% if(product.mrp){ %>
                    <div style="font-size:12px;color:#6c757d;margin-bottom:6px;">
                      <del>‚Çπ<%= product.mrp %></del>
                      <span style="color:#198754;font-weight:600;margin-left:4px;">
                        <%= product.discount %>% off
                      </span>
                    </div>
                    <% } %>

                      <!-- PRICE + CART -->
                      <div style="
            display:flex;
            align-items:center;
            justify-content:space-between;
            margin-top:6px;
          ">
                        <div style="font-size:18px;font-weight:700;">
                          ‚Çπ<%= product.net_amount %>
                        </div>

                        <button onclick="addToCart('<%= product.id %>')" style="
                width:34px;
                height:34px;
                border-radius:50%;
                border:1px solid #0d6efd;
                background:#ffffff;
                color:#0d6efd;
                display:flex;
                align-items:center;
                justify-content:center;
              ">
                          <i class="ci-shopping-cart"></i>
                        </button>
                      </div>

                </div>

              </div>
            </div>

            <% }) %>

        </div>

        <% } else { %>
          <div style="text-align:center;padding:40px;color:#6c757d;">
            No new arrivals at the moment
          </div>
          <% } %>

    </section>


    <!-- Trending products with Safety Checks -->
    <section class="container-fluid px-4 px-md-5" style="margin-top:80px;">

  <!-- HEADER -->
  <div style="
    display:flex;
    flex-direction:column;
    gap:12px;
    margin-bottom:20px;
  ">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <h2 style="font-weight:700;margin:0;">Trending Products</h2>
    </div>

    <!-- CATEGORY FILTER (TOP 5) -->
    <div style="display:flex;gap:10px;flex-wrap:wrap;">
      <button onclick="filterTrending('all')"
        style="
          padding:6px 14px;
          border-radius:20px;
          border:1px solid #0d6efd;
          background:#0d6efd;
          color:#fff;
          font-size:13px;
          font-weight:500;
        ">
        All
      </button>

      <% for(let c = 0; c < Math.min(5, result[0].length); c++) { %>
        <button onclick="filterTrending('<%= String(result[0][c].id) %>')"
          style="
            padding:6px 14px;
            border-radius:20px;
            border:1px solid #ddd;
            background:#ffffff;
            font-size:13px;
            font-weight:500;
          ">
          <%= result[0][c].name %>
        </button>
      <% } %>
    </div>
  </div>

  <% if (result && result[4] && result[4].length > 0) { %>

  <!-- PRODUCTS GRID -->
  <div class="row g-3" id="trendingGrid">

    <% result[4].forEach(product => { %>

    <div class="col-6 col-sm-4 col-md-3 col-lg-2 trending-item"
         data-category="<%= String(product.category_id || product.category || 'all') %>">

      <!-- CARD -->
      <div style="
        width:100%;
        background:#ffffff;
        border-radius:16px;
        border:2px dashed #d0d0d0;
        overflow:hidden;
        height:100%;
      ">

        <!-- IMAGE -->
        <a href="/product?id=<%= product.id %>" style="text-decoration:none;">
          <img src="https://www.fikaonline.in/images/<%= product.image %>"
               alt="<%= product.name %>"
               style="
                 width:100%;
                 height:160px;
                 object-fit:contain;
                 padding:12px;
                 background:#f8f8f8;
               ">
        </a>

        <!-- YELLOW BAR -->
        <div style="
          background:#ffc107;
          font-size:12px;
          font-weight:600;
          text-align:center;
          padding:5px 0;
        ">
          <%= product.spec || 'High Playback' %>
        </div>

        <!-- CONTENT -->
        <div style="padding:10px 12px;">

          <!-- NAME -->
          <a href="/product?id=<%= product.id %>"
             style="
               text-decoration:none;
               color:#000;
               display:block;
               font-size:14px;
               font-weight:600;
               white-space:nowrap;
               overflow:hidden;
               text-overflow:ellipsis;
               margin-bottom:6px;
             ">
            <%= (product.name || 'Product').replace(/["‚Äú‚Äù]/g, '').trim() %>
          </a>

          <!-- RATING -->
          <div style="
            display:inline-flex;
            align-items:center;
            gap:4px;
            font-size:12px;
            border:1px solid #ddd;
            border-radius:12px;
            padding:2px 6px;
            margin-bottom:6px;
          ">
            ‚≠ê <%= product.rating || '4.8' %>
          </div>

          <% if(product.price){ %>
          <div style="font-size:12px;color:#6c757d;margin-bottom:6px;">
            <del>‚Çπ<%= product.price %></del>
            <span style="color:#198754;font-weight:600;margin-left:4px;">
              <%= product.discount || 0 %>% off
            </span>
          </div>
          <% } %>

          <!-- PRICE + CART -->
          <div style="
            display:flex;
            align-items:center;
            justify-content:space-between;
            margin-top:6px;
          ">
            <div style="font-size:18px;font-weight:700;">
              ‚Çπ<%= product.net_amount %>
            </div>

            <button onclick="addToCart('<%= product.id %>')"
              style="
                width:34px;
                height:34px;
                border-radius:50%;
                border:1px solid #0d6efd;
                background:#ffffff;
                color:#0d6efd;
                display:flex;
                align-items:center;
                justify-content:center;
              ">
              <i class="ci-shopping-cart"></i>
            </button>
          </div>

        </div>

      </div>
    </div>

    <% }) %>

  </div>

  <% } else { %>
    <div style="text-align:center;padding:40px;color:#6c757d;">
      No trending products available
    </div>
  <% } %>

</section>
<script>
  function filterTrending(categoryId) {
    const items = document.querySelectorAll('.trending-item');
    let visibleCount = 0;

    items.forEach(item => {
      // reset first
      item.style.display = 'none';

      const itemCat = item.getAttribute('data-category');

      if (categoryId === 'all' || itemCat === categoryId) {
        if (visibleCount < 6) {
          item.style.display = 'block';
          visibleCount++;
        }
      }
    });
  }

  // INITIAL LOAD ‚Äì SHOW FIRST 6
  document.addEventListener('DOMContentLoaded', function () {
    filterTrending('all');
  });
</script>


    <!-- Sale Banner with Safety Checks -->
    <section class="container-fluid  px-4 px-md-5" style="margin-top:80px;">

  <% if (result && result[7] && result[7].length > 0 && result[7][0]) { %>

  <div style="
    width:100%;
    border-radius:18px;
    overflow:hidden;
    background:
      linear-gradient(90deg,
        rgba(0,0,0,0.85) 0%,
        rgba(120,0,0,0.85) 55%,
        rgba(0,0,0,0.9) 100%
      );
    position:relative;
  ">

    <!-- INNER -->
    <div style="
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:28px 32px;
      min-height:180px;
      color:#ffffff;
      position:relative;
      z-index:2;
      flex-wrap:wrap;
    ">

      <!-- LEFT CONTENT -->
      <div style="max-width:520px;">

        <!-- BRAND STYLE TITLE -->
        <div style="
          font-size:42px;
          font-weight:800;
          letter-spacing:1px;
          line-height:1;
          margin-bottom:8px;
        ">
          <%= result[7][0].title || 'SPECIAL OFFER' %>
        </div>

        <!-- SUB TEXT -->
        <div style="
          font-size:14px;
          letter-spacing:2px;
          text-transform:uppercase;
          opacity:0.85;
          margin-bottom:14px;
        ">
          Premium Audio Experience
        </div>

        <!-- COUPON -->
        <div style="font-size:15px;">
          Use code
          <span style="
            display:inline-block;
            background:#ffffff;
            color:#000;
            font-weight:700;
            border-radius:20px;
            padding:4px 14px;
            margin-left:6px;
          ">
            <%= result[7][0].name || 'OFFER' %>
          </span>
          to get best deal
        </div>

      </div>

      <!-- RIGHT DISCOUNT -->
      <div style="
        display:flex;
        align-items:center;
        justify-content:center;
        min-width:160px;
        text-align:center;
      ">
        <div style="
          font-size:56px;
          font-weight:900;
          line-height:1;
        ">
          <%= result[7][0].amount || '0' %>
        </div>

        <div style="margin-left:6px;text-align:left;">
          <% if (result[7][0].type === 'Flat') { %>
            <div style="font-size:22px;font-weight:700;">Rs.</div>
          <% } else { %>
            <div style="font-size:22px;font-weight:700;">%</div>
          <% } %>
          <div style="font-size:14px;letter-spacing:1px;">OFF</div>
        </div>
      </div>

    </div>

    <!-- SOFT GLOW OVERLAY -->
    <div style="
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 70% 50%,
          rgba(255,0,0,0.35),
          transparent 60%
        );
      z-index:1;
    "></div>

  </div>

  <% } else { %>

  <div style="text-align:center;padding:40px;">
    <h4>Special Offers Coming Soon!</h4>
  </div>

  <% } %>

</section>


    <!-- Special offers with Safety Checks -->
    <section class="container-fluid px-4 px-md-5" style="margin-top:80px;">

  <!-- HEADER -->
  <div class="d-flex align-items-center justify-content-between border-bottom pb-3 mb-3">
    <h2 style="font-weight:700;margin:0;">Special Offers</h2>
  </div>

  <% if (result && result[8] && result[8].length > 0) { %>

  <div class="position-relative">

    <!-- SWIPER -->
    <div class="swiper py-3"
      data-swiper='{
        "slidesPerView": 2,
        "spaceBetween": 16,
        "loop": true,
        "breakpoints": {
          "768": { "slidesPerView": 3 },
          "992": { "slidesPerView": 4 },
          "1200": { "slidesPerView": 6 }
        }
      }'>

      <div class="swiper-wrapper">

        <% for(let i = 0; i < Math.min(10, result[8].length); i++) { %>

        <div class="swiper-slide">

          <!-- CARD -->
          <div style="
            width:100%;
            background:#ffffff;
            border-radius:16px;
            border:2px dashed #d0d0d0;
            overflow:hidden;
            height:100%;
          ">

            <!-- IMAGE -->
            <a href="/product?id=<%= result[8][i].id || '' %>" style="text-decoration:none;">
              <img src="https://www.fikaonline.in/images/<%= result[8][i].image || '' %>"
                   alt="<%= result[8][i].name || 'Product' %>"
                   style="
                     width:100%;
                     height:160px;
                     object-fit:contain;
                     padding:12px;
                     background:#f8f8f8;
                   ">
            </a>

            <!-- YELLOW BAR -->
            <div style="
              background:#ffc107;
              font-size:12px;
              font-weight:600;
              text-align:center;
              padding:5px 0;
            ">
              <%= result[8][i].spec || 'Special Deal' %>
            </div>

            <!-- CONTENT -->
            <div style="padding:10px 12px;">

              <!-- NAME -->
              <a href="/product?id=<%= result[8][i].id || '' %>"
                 style="
                   text-decoration:none;
                   color:#000;
                   display:block;
                   font-size:14px;
                   font-weight:600;
                   white-space:nowrap;
                   overflow:hidden;
                   text-overflow:ellipsis;
                   margin-bottom:6px;
                 ">
                <%= (result[8][i].name || 'Product').replace(/["‚Äú‚Äù]/g, '') %>
              </a>

              <!-- RATING (OPTIONAL SAFE) -->
              <% if (result[8][i].rating) { %>
              <div style="
                display:inline-flex;
                align-items:center;
                gap:4px;
                font-size:12px;
                border:1px solid #ddd;
                border-radius:12px;
                padding:2px 6px;
                margin-bottom:6px;
              ">
                ‚≠ê <%= result[8][i].rating %>
              </div>
              <% } %>

              <% if(result[8][i].price){ %>
              <div style="font-size:12px;color:#6c757d;margin-bottom:6px;">
                <del>‚Çπ<%= result[8][i].price %></del>
                <% if(result[8][i].discount){ %>
                <span style="color:#198754;font-weight:600;margin-left:4px;">
                  <%= result[8][i].discount %>% off
                </span>
                <% } %>
              </div>
              <% } %>

              <!-- PRICE + CART -->
              <div style="
                display:flex;
                align-items:center;
                justify-content:space-between;
                margin-top:6px;
              ">
                <div style="font-size:18px;font-weight:700;">
                  ‚Çπ<%= result[8][i].net_amount || '0' %>
                </div>

                <button onclick="addToCart('<%= result[8][i].id %>')"
                  style="
                    width:34px;
                    height:34px;
                    border-radius:50%;
                    border:1px solid #0d6efd;
                    background:#ffffff;
                    color:#0d6efd;
                    display:flex;
                    align-items:center;
                    justify-content:center;
                  ">
                  <i class="ci-shopping-cart"></i>
                </button>
              </div>

            </div>

          </div>
        </div>

        <% } %>

      </div>
    </div>

  </div>

  <% } else { %>
    <div class="text-center py-5">
      <p class="text-muted">Check back soon for special offers!</p>
    </div>
  <% } %>

</section>

  </main>

  <%- include ('./footer1.ejs') %>
    <!-- Swiper JS -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <script>
      document.addEventListener('DOMContentLoaded', function () {

        /* ===============================
           üî• SWIPER INITIALIZATION (SAFE)
        =============================== */
        document.querySelectorAll('.swiper').forEach(swiperEl => {
          try {
            const rawConfig = swiperEl.getAttribute('data-swiper');
            if (!rawConfig) return;

            const config = JSON.parse(rawConfig.replace(/&quot;/g, '"'));
            const slidesCount = swiperEl.querySelectorAll('.swiper-slide').length;

            // üî• Fix Swiper loop warning
            if (config.loop === true) {
              const slidesPerView = config.slidesPerView || 1;
              if (slidesCount <= slidesPerView) {
                config.loop = false;
              }
            }

            new Swiper(swiperEl, config);

          } catch (error) {
            console.warn('Swiper initialization failed:', error);
          }
        });


        /* ===============================
           üîç SEARCH PANEL HANDLING
        =============================== */
        const searchInput = document.getElementById("searchInput");
        const searchPanel = document.getElementById("searchPanel");

        if (searchInput && searchPanel) {
          searchInput.addEventListener("focus", () => {
            searchPanel.style.display = "block";
          });

          document.addEventListener("click", (e) => {
            if (!e.target.closest("#searchPanel") &&
              !e.target.closest("#searchInput")) {
              searchPanel.style.display = "none";
            }
          });
        }

      });


      /* ===============================
         üõí ADD TO CART
      ================================ */
      function addToCart(productId) {
        if (!productId) return;

        fetch('/add-to-cart', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ productId })
        })
          .then(res => res.json())
          .then(data => {
            if (data.success) location.reload();
          })
          .catch(err => console.error('Add to cart error:', err));
      }


      /* ===============================
         ‚ù§Ô∏è ADD TO WISHLIST
      ================================ */
      function addToWishlist(productId) {
        if (!productId) return;

        fetch('/add-to-wishlist', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ productId })
        })
          .then(res => res.json())
          .then(data => {
            if (data.success) alert('Added to wishlist!');
          })
          .catch(err => console.error('Wishlist error:', err));
      }
    </script>
    <script src="/theme/assets/vendor/bootstrap/bootstrap.bundle.min.js"></script>